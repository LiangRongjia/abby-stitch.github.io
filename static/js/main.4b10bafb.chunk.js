(this["webpackJsonpabby-stitch.github.io"]=this["webpackJsonpabby-stitch.github.io"]||[]).push([[0],[,,,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var s=c(2),n=c.n(s),r=c(5),a=c.n(r),i=(c(10),c(11),c(1)),o=c(3),l=(c(12),c(0));function u(e){var t=e.avgPoints,c=e.reload,s=e.checkNone,n=e.checkAll;return Object(l.jsx)("header",{className:"header",children:Object(l.jsxs)("div",{className:"header-container",children:[Object(l.jsx)("img",{className:"avatar",alt:"avatar",src:"./favicon.ico"}),Object(l.jsx)("h1",{children:"\u5c11\u7237\u7684\u7ee9\u70b9"}),Object(l.jsxs)("p",{className:"avg-points",children:["\u5e73\u5747\u7ee9\u70b9\uff1a",t.toFixed(2)]}),Object(l.jsx)("button",{className:"ms-button",onClick:c,children:"\u5237\u65b0"}),Object(l.jsx)("button",{className:"ms-button",onClick:s,children:"\u5168\u90e8\u6e05\u9664"}),Object(l.jsx)("button",{className:"ms-button primary",onClick:n,children:"\u5168\u90e8\u52fe\u9009"})]})})}c(14),c(15);function d(e){var t=e.name,c=e.credits,s=e.grades,r=e.points,a=e.checked,i=e.gradesList,o=e.setGrades,u=e.checkClassItem,d=n.a.createRef();return Object(l.jsxs)("li",{className:"class-list-item",children:[Object(l.jsx)("span",{className:"class-name",children:t}),Object(l.jsx)("span",{className:"class-credits",children:c}),Object(l.jsx)("span",{className:"class-grades",children:Object(l.jsx)("select",{ref:d,onChange:function(){return d.current&&o(t,d.current.value)},value:s,children:i.map((function(e){return Object(l.jsx)("option",{value:e,children:e},e)}))})}),Object(l.jsx)("span",{className:"class-points",children:r}),Object(l.jsx)("span",{className:"class-checked",children:Object(l.jsx)("input",{type:"checkbox",onChange:function(){return u(t)},checked:a})})]})}function h(e){var t=e.semesterID,c=e.semesterName,s=e.classes,n=e.gradesList,r=e.setGrades,a=e.checkSemester,i=e.onlyCheckSemester,o=e.checkClassItem;return Object(l.jsxs)("article",{className:"semester",children:[Object(l.jsxs)("header",{className:"title-bar",children:[Object(l.jsx)("h2",{children:c}),Object(l.jsx)("button",{className:"ms-button",onClick:function(){return a(t)},children:"\u52fe\u9009\u5b66\u671f"}),Object(l.jsx)("button",{className:"ms-button primary",onClick:function(){return i(t)},children:"\u4ec5\u672c\u5b66\u671f"})]}),Object(l.jsxs)("div",{className:"class-list-head",children:[Object(l.jsx)("span",{className:"name-field",children:"\u8bfe\u7a0b"}),Object(l.jsx)("span",{className:"credits-field",children:"\u5b66\u5206"}),Object(l.jsx)("span",{className:"grades-field",children:"\u7b49\u7ea7"}),Object(l.jsx)("span",{className:"points-field",children:"\u7ee9\u70b9"}),Object(l.jsx)("span",{className:"checked-field",children:"\u52fe\u9009"})]}),s.map((function(e){return Object(l.jsx)(d,{name:e.name,credits:e.credits,grades:e.grades,points:e.points,checked:e.checked,gradesList:n,setGrades:r,checkClassItem:o},e.name)}))]})}c(16);var j=[],m=[],b=[],f=function(e,t){return parseInt(t.filter((function(t){return t.name===e})).map((function(e){return e.points})).join(""))},O=function(e){var t=e.reduce((function(e,t){return t.checked?e+t.credits*t.points:e}),0),c=e.reduce((function(e,t){return t.checked?e+t.credits:e}),0);return 0===c?0:t/c},k=function(){var e=Object(s.useState)(!0),t=Object(o.a)(e,1)[0],c=Object(s.useState)(j),n=Object(o.a)(c,2),r=n[0],a=n[1],l=Object(s.useState)(m),u=Object(o.a)(l,2),d=u[0],h=u[1],k=Object(s.useState)(b),p=Object(o.a)(k,2),x=p[0],g=p[1],v={reload:function(){return window.location.reload()},checkAll:function(){return a(r.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{checked:!0})})))},checkNone:function(){return a(r.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{checked:!1})})))},checkSemester:function(e){return a(r.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{checked:t.semester===e||t.checked})})))},onlyCheckSemester:function(e){return a(r.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{checked:t.semester===e})})))},checkClassItem:function(e){return a(r.map((function(t){return t.name===e?Object(i.a)(Object(i.a)({},t),{},{checked:!t.checked}):t})))},setGrades:function(e,t){return a(r.map((function(c){return c.name===e?Object(i.a)(Object(i.a)({},c),{},{grades:t,points:f(t,d)}):c})))}};return Object(s.useEffect)((function(){fetch("".concat("https://liangrongjia.github.io/abby-stitch.github.io/db","/my-points.json")).then((function(e){return e.json()})).then((function(e){h(e.grades),g(e.semesters),a(e.classes.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{points:f(t.grades,e.grades),checked:!0})})).sort((function(e,t){return t.points-e.points===0?t.credits-e.credits:t.points-e.points})))}))}),[t]),{avgPoints:O(r),gradesList:d.map((function(e){return e.name})),semesters:x.map((function(e){return{ID:e.ID,name:e.name,classes:(t=e.ID,c=r,c.filter((function(e){return e.semester===t}))||j)};var t,c})).reverse(),reload:v.reload,checkAll:v.checkAll,checkNone:v.checkNone,setGrades:v.setGrades,checkSemester:v.checkSemester,onlyCheckSemester:v.onlyCheckSemester,checkClassItem:v.checkClassItem}};function p(){var e=k(),t=e.avgPoints,c=e.semesters,s=e.gradesList,n=e.reload,r=e.checkAll,a=e.checkNone,i=e.setGrades,o=e.checkSemester,d=e.onlyCheckSemester,j=e.checkClassItem;return Object(l.jsxs)("div",{id:"my-points",children:[Object(l.jsx)(u,{avgPoints:t,reload:n,checkAll:r,checkNone:a}),Object(l.jsx)("main",{children:c.map((function(e){return Object(l.jsx)(h,{semesterID:e.ID,semesterName:e.name,classes:e.classes,gradesList:s,setGrades:i,checkSemester:o,onlyCheckSemester:d,checkClassItem:j},e.ID)}))})]})}function x(){var e=n.a.createRef();return Object(l.jsx)("div",{ref:e,className:"app",children:Object(l.jsx)(p,{})})}var g=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,18)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),s(e),n(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root")),g(),"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js")}],[[17,1,2]]]);
//# sourceMappingURL=main.4b10bafb.chunk.js.map