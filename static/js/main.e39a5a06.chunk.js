(this["webpackJsonpabby-stitch.github.io"]=this["webpackJsonpabby-stitch.github.io"]||[]).push([[0],[,,,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(5),r=c.n(a),i=(c(10),c(11),c(2)),o=c(3),l=(c(12),c(0));function u(e){return Object(l.jsxs)("header",{className:"header",children:[Object(l.jsx)("img",{className:"avatar",src:"./favicon.ico"}),Object(l.jsx)("h1",{children:"\u5c11\u7237\u7684\u7ee9\u70b9"}),Object(l.jsxs)("p",{className:"avg-points",children:["\u5e73\u5747\u7ee9\u70b9\uff1a",e.avgPoints.toFixed(2)]}),Object(l.jsx)("button",{className:"ms-button",onClick:e.reload,children:"\u5237\u65b0"}),Object(l.jsx)("button",{className:"ms-button",onClick:e.selectNone,children:"\u5168\u90e8\u6e05\u9664"}),Object(l.jsx)("button",{className:"ms-button primary",onClick:e.selectAll,children:"\u5168\u90e8\u52fe\u9009"})]})}u.defaultProps={avgPoints:0,reload:function(){},selectNone:function(){},selectAll:function(){}};c(14),c(15);function d(e){var t=s.a.createRef();return Object(l.jsxs)("li",{className:"class-list-item",children:[Object(l.jsx)("span",{className:"class-name",children:e.name}),Object(l.jsx)("span",{className:"class-credits",children:e.credits}),Object(l.jsx)("span",{className:"class-grades",children:Object(l.jsx)("select",{ref:t,onChange:function(){return e.setGrades(e.name,t.current.value)},value:e.grades,children:e.gradesList.map((function(e){return Object(l.jsx)("option",{value:e,children:e},e)}))})}),Object(l.jsx)("span",{className:"class-points",children:e.points}),Object(l.jsx)("span",{className:"class-checked",children:Object(l.jsx)("input",{type:"checkbox",credits:e.credits,points:e.points,onChange:function(){return e.checkClassItem(e.name)},checked:e.checked})})]})}function j(e){return Object(l.jsxs)("article",{className:"semester",children:[Object(l.jsxs)("header",{className:"title-bar",children:[Object(l.jsx)("h2",{children:e.semesterName}),Object(l.jsx)("button",{className:"ms-button",onClick:function(){return e.selectSemester(e.semesterID)},children:"\u52fe\u9009\u5b66\u671f"}),Object(l.jsx)("button",{className:"ms-button primary",onClick:function(){return e.onlySelectSemester(e.semesterID)},children:"\u4ec5\u672c\u5b66\u671f"})]}),Object(l.jsxs)("div",{className:"class-list-head",children:[Object(l.jsx)("span",{className:"name-field",children:"\u8bfe\u7a0b"}),Object(l.jsx)("span",{className:"credits-field",children:"\u5b66\u5206"}),Object(l.jsx)("span",{className:"grades-field",children:"\u7b49\u7ea7"}),Object(l.jsx)("span",{className:"points-field",children:"\u7ee9\u70b9"}),Object(l.jsx)("span",{className:"checked-field",children:"\u52fe\u9009"})]}),e.classes.map((function(t){return Object(l.jsx)(d,{name:t.name,credits:t.credits,grades:t.grades,points:t.points,checked:t.checked,gradesList:e.gradesList,setGrades:e.setGrades,checkClassItem:e.checkClassItem},t.name)}))]})}var m={fetchDB:function(){return fetch("".concat("http://localhost:3000","/db/my-points.json")).then((function(e){return e.json()}))}},b=(c(16),{semesters:[],grades:[],classes:[]}),h=[{semester:"",grades:"",credits:0,name:"",points:0,checked:!1}],f=function(e,t){return t.filter((function(t){return t.name===e})).map((function(e){return e.points})).join("")};function p(){var e=Object(n.useState)(b),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(0),r=Object(o.a)(a,2),d=r[0],p=r[1],O=Object(n.useState)(h),x=Object(o.a)(O,2),g=x[0],k=x[1];Object(n.useEffect)((function(){var e=g.reduce((function(e,t){return t.checked?e+t.credits*t.points:e}),0),t=g.reduce((function(e,t){return t.checked?e+t.credits:e}),0);p(0===t?0:e/t)}),[g]);var N=function(e){return k(g.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{checked:t.semester===e||t.checked})})))},v=function(e){return k(g.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{checked:t.semester===e})})))},C=function(e){return k(g.map((function(t){return t.name===e?Object(i.a)(Object(i.a)({},t),{},{checked:!t.checked}):t})))},I=function(e,t){return k(g.map((function(n){return n.name===e?Object(i.a)(Object(i.a)({},n),{},{grades:t,points:f(t,c.grades)}):n})))};return g===h&&m.fetchDB().then((function(e){s(e),k(e.classes.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{points:f(e.grades,c.grades),checked:!0})})).sort((function(e,t){return t.points-e.points===0?t.credits-e.credits:t.points-e.points})))})),Object(l.jsxs)("main",{className:"my-points",children:[Object(l.jsx)(u,{avgPoints:d,reload:function(){return window.location.reload()},checkAll:function(){return k(g.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{checked:!0})})))},checkNone:function(){return k(g.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{checked:!1})})))}}),c.semesters.map((function(e){return Object(l.jsx)(j,{semesterID:e.ID,semesterName:e.name,classes:(t=e.ID,n=g,n.filter((function(e){return e.semester===t}))||h),gradesList:c.grades.map((function(e){return e.name})),setGrades:I,selectSemester:N,onlySelectSemester:v,checkClassItem:C},e.ID);var t,n})).reverse()]})}function O(){var e=s.a.createRef();return Object(l.jsx)("div",{ref:e,className:"app",children:Object(l.jsx)(p,{})})}var x=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,18)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(O,{})}),document.getElementById("root")),x()}],[[17,1,2]]]);
//# sourceMappingURL=main.e39a5a06.chunk.js.map