{"version":3,"sources":["App/MyPoints/Header/Header.jsx","App/MyPoints/Semester/ClassItem/ClassItem.jsx","App/MyPoints/Semester/Semester.jsx","App/MyPoints/MyPointsAPI.js","App/MyPoints/MyPoints.jsx","App/App.jsx","reportWebVitals.js","index.js"],"names":["Header","props","className","src","avgPoints","onClick","reload","selectNone","selectAll","ClassItem","selectRef","React","createRef","name","credits","ref","onChange","setGrades","current","value","grades","gradesList","map","item","points","type","checkClassItem","checked","Semester","semesterName","selectSemester","semesterID","onlySelectSemester","classes","db","semesters","ID","order","semester","MyPointsAPI","fetchDB","Promise","resove","defaultData","defaultClassesState","MyPoints","useState","data","setData","avgPointsState","setAvgPointsState","classesState","setClassesState","useEffect","sum","reduce","acc","cur","creditsSum","toFixed","getPoints","gradesName","filter","join","classItem","newGrades","then","newData","sort","a","b","window","location","reverse","ButtonAppBar","appRef","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.94941307.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Header.css';\r\n/**\r\n * @param { { \r\n *  avgPoints: string, \r\n *  reload: function, \r\n *  selectAll: function, \r\n *  selectNone: function \r\n * } } props \r\n */\r\nexport default function Header(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"avatar\" src=\"./favicon.ico\" />\r\n      <h1>少爷的绩点</h1>\r\n      <p className=\"avg-points\">平均绩点：{props.avgPoints}</p>\r\n      <button className=\"ms-button\" onClick={props.reload}>刷新</button>\r\n      <button className=\"ms-button\" onClick={props.selectNone}>全部清除</button>\r\n      <button className=\"ms-button primary\" onClick={props.selectAll}>全部勾选</button>\r\n    </header>\r\n  )\r\n}","import React from 'react'\r\nimport './ClassItem.css'\r\n\r\nexport default function ClassItem(props) {\r\n  const selectRef = React.createRef()\r\n  return (\r\n    <li className=\"class-list-item\">\r\n      <span className=\"class-name\">{props.name}</span>\r\n      <span className=\"class-credits\">{props.credits}</span>\r\n      <span className=\"class-grades\">\r\n        <select\r\n          ref={selectRef}\r\n          onChange={() => props.setGrades(props.name, selectRef.current.value)}\r\n          value={props.grades}>\r\n          {props.gradesList.map(item =>\r\n            <option key={item} value={item}>{item}</option>\r\n          )}\r\n        </select>\r\n      </span>\r\n      <span className=\"class-points\">{props.points}</span>\r\n      <span className=\"class-checked\">\r\n        <input type=\"checkbox\"\r\n          credits={props.credits}\r\n          points={props.points}\r\n          onChange={() => (props.checkClassItem(props.name))}\r\n          checked={props.checked} />\r\n      </span>\r\n    </li>\r\n  )\r\n}","import React from 'react'\r\nimport './Semester.css'\r\nimport ClassItem from './ClassItem/ClassItem.jsx'\r\n\r\nexport default function Semester(props) {\r\n  return (\r\n    <article className=\"semester\">\r\n      <header className=\"title-bar\">\r\n        <h2>{props.semesterName}</h2>\r\n        <button className=\"ms-button\"\r\n          onClick={() => props.selectSemester(props.semesterID)}>勾选学期</button>\r\n        <button className=\"ms-button primary\"\r\n          onClick={() => props.onlySelectSemester(props.semesterID)}>仅本学期</button>\r\n      </header>\r\n      <div className=\"class-list-head\">\r\n        <span className=\"name-field\">课程</span>\r\n        <span className=\"credits-field\">学分</span>\r\n        <span className=\"grades-field\">等级</span>\r\n        <span className=\"points-field\">绩点</span>\r\n        <span className=\"checked-field\">勾选</span>\r\n      </div>\r\n      {props.classes.map(item =>\r\n        <ClassItem\r\n          key={item.name}\r\n          name={item.name}\r\n          credits={item.credits}\r\n          grades={item.grades}\r\n          points={item.points}\r\n          checked={item.checked}\r\n          gradesList={props.gradesList}\r\n          setGrades={props.setGrades}\r\n          checkClassItem={props.checkClassItem} />\r\n      )\r\n      }\r\n    </article>\r\n  )\r\n}","// const baseUrl = 'http://localhost:3001'\r\n\r\nconst db = {\r\n    semesters: [\r\n        { ID: '大一上', order: 0, name: '2018-2019 学年第 1 学期' },\r\n        { ID: '大一下', order: 1, name: '2018-2019 学年第 2 学期' },\r\n        { ID: '德强上', order: 2, name: '2019-2020 学年第 1 学期' },\r\n        { ID: '德强下', order: 3, name: '2019-2020 学年第 2 学期' },\r\n        { ID: '大二上', order: 4, name: '2020-2021 学年第 1 学期' }\r\n    ],\r\n    grades: [\r\n        { name: '优', points: 5 },\r\n        { name: '良', points: 4 },\r\n        { name: '中', points: 3 },\r\n        { name: '及格', points: 2 },\r\n        { name: '不及格', points: 0 },\r\n        { name: '缓考', points: 0 }\r\n    ],\r\n    classes: [\r\n        { semester: '大一上', grades: '优', credits: 0.5, name: '物理实验（上）' },\r\n        { semester: '大一上', grades: '优', credits: 3, name: '思想道德修养与法律基础' },\r\n        { semester: '大一上', grades: '中', credits: 1, name: '军事理论' },\r\n        { semester: '大一上', grades: '优', credits: 1, name: '体育(1)' },\r\n        { semester: '大一上', grades: '良', credits: 2, name: '工程实践' },\r\n        { semester: '大一上', grades: '中', credits: 5, name: '高等数学(B)上' },\r\n        { semester: '大一上', grades: '优', credits: 2, name: '国际交流英语视听说1' },\r\n        { semester: '大一上', grades: '优', credits: 2, name: '大学英语五级' },\r\n        { semester: '大一上', grades: '优', credits: 4, name: '日语二外(上)' },\r\n        { semester: '大一上', grades: '良', credits: 2.5, name: 'C/C++程序设计' },\r\n        { semester: '大一上', grades: '优', credits: 1, name: '新生教授研讨课（教授讲坛）' },\r\n        { semester: '大一上', grades: '优', credits: 3, name: '机械制图(三)' },\r\n        { semester: '大一上', grades: '优', credits: 0.5, name: '形势与政策(1)' },\r\n        { semester: '大一下', grades: '优', credits: 0.5, name: '形势与政策(2)' },\r\n        { semester: '大一下', grades: '优', credits: 2, name: '素描与写生' },\r\n        { semester: '大一下', grades: '优', credits: 1, name: '电工实习' },\r\n        { semester: '大一下', grades: '中', credits: 4, name: '电路理论' },\r\n        { semester: '大一下', grades: '中', credits: 5, name: '高等数学(B)下' },\r\n        { semester: '大一下', grades: '良', credits: 3, name: '线性代数B' },\r\n        { semester: '大一下', grades: '中', credits: 3, name: '普通物理(B)上' },\r\n        { semester: '大一下', grades: '优', credits: 1, name: '体育(2)' },\r\n        { semester: '大一下', grades: '良', credits: 1.5, name: '科技文献检索与利用' },\r\n        { semester: '大一下', grades: '中', credits: 3, name: '中国近现代史纲要' },\r\n        { semester: '大一下', grades: '良', credits: 1, name: '物理实验（下）' },\r\n        { semester: '德强上', grades: '良', credits: 2, name: '雕塑' },\r\n        { semester: '德强上', grades: '良', credits: 1.5, name: '中国音乐与歌曲入门（中外）' },\r\n        { semester: '德强上', grades: '良', credits: 18, name: '德语1' },\r\n        { semester: '德强下', grades: '良', credits: 18, name: '德语2' },\r\n        { semester: '德强下', grades: '优', credits: 2, name: '军训' },\r\n        { semester: '大二上', grades: '优', credits: 1.5, name: '机器人与人工智能前沿' },\r\n        { semester: '大二上', grades: '良', credits: 1, name: '电路实验' },\r\n        { semester: '大二上', grades: '优', credits: 2, name: '英语笔译' },\r\n        { semester: '大二上', grades: '优', credits: 5, name: '毛泽东思想和中国特色社会主义理论体系概论' },\r\n        { semester: '大二上', grades: '优', credits: 0.5, name: '形势与政策(3)' },\r\n        { semester: '大二上', grades: '良', credits: 2, name: '数据结构' },\r\n        { semester: '大二上', grades: '优', credits: 2, name: '专业导论（信息类）' },\r\n        { semester: '大二上', grades: '缓考', credits: 3, name: '概率论与数理统计' },\r\n        { semester: '大二上', grades: '缓考', credits: 3, name: '普通物理(B)下' },\r\n        { semester: '大二上', grades: '缓考', credits: 3, name: '复变函数与积分变换' },\r\n        { semester: '大二上', grades: '缓考', credits: 3, name: '模拟电子技术' }\r\n    ]\r\n}\r\n\r\n/**\r\n * @param {{\r\n *  semesters: { ID: string, order: number, name: string } [],\r\n *  classes: { semester: string, grades: string, credits: number, name: string } [],\r\n *  grades: { name: string, points: number } []\r\n * }} db \r\n */\r\nconst toViewData = db => db.semesters.map(semester => ({\r\n    title: semester.name,\r\n    classes: db.classes.filter(classItem => classItem.semester === semester.ID).map(classItem => ({\r\n        name: classItem.name,\r\n        credits: classItem.credits,\r\n        grades: classItem.grades,\r\n        points: db.grades.filter(gradesItem => gradesItem.name === classItem.grades)[0].points,\r\n        checked: false\r\n    }))\r\n}))\r\n\r\nconst MyPointsAPI = {\r\n    // fetchDB: () => fetch(`${baseUrl}/fetchDB`).then(response => response.json())\r\n    fetchDB: () => (new Promise((resove) => resove(db)))\r\n}\r\n\r\nexport default MyPointsAPI","import React, { useState, useEffect } from 'react';\r\nimport Header from './Header/Header.jsx'\r\nimport Semester from './Semester/Semester.jsx'\r\nimport MyPointsAPI from './MyPointsAPI'\r\n\r\nimport './MyPoints.css'\r\n\r\n/* 默认值 */\r\nconst defaultData = { semesters: [], grades: [], classes: [] }\r\nconst defaultAvgPointsState = 0\r\nconst defaultClassesState = [{ semester: '', grades: '', credits: 0, name: '', points: 0, checked: false }]\r\n\r\nexport default function MyPoints() {\r\n  /* 存储 fetch 数据 */\r\n  const [data, setData] = useState(defaultData)\r\n  /* 用 hook 存储组件的 state */\r\n  const [avgPointsState, setAvgPointsState] = useState(defaultAvgPointsState)\r\n  const [classesState, setClassesState] = useState(defaultClassesState)\r\n\r\n  /* classesState 变更 -> avgPointsState 更新 */\r\n  useEffect(() => {\r\n    const sum = classesState.reduce((acc, cur) => cur.checked ? acc + cur.credits * cur.points : acc, 0)\r\n    const creditsSum = classesState.reduce((acc, cur) => cur.checked ? acc + cur.credits : acc, 0)\r\n    const avgPoints = sum === 0 ? '未勾选' : (sum / creditsSum).toFixed(2)\r\n    setAvgPointsState(avgPoints)\r\n  }, [classesState]);\r\n\r\n  /**\r\n   * 根据 gradesName 获取 points\r\n   * @param { string } gradesName \r\n   */\r\n  const getPoints = gradesName => data.grades.filter((item) => item.name === gradesName).map(item => item.points).join('')\r\n  /**\r\n   * 获取某 semester 下的所有 classItem\r\n   * @param { number } semesterID \r\n   */\r\n  const getClasses = semesterID => classesState.filter(classItem => classItem.semester === semesterID) || defaultClassesState\r\n  /**\r\n   * 重新加载该子应用\r\n   */\r\n  const reload = () => window.location.reload()\r\n  /**\r\n   * 勾选全部 classItem\r\n   */\r\n  const selectAll = () => setClassesState(classesState.map(classItem => ({\r\n    ...classItem,\r\n    checked: true\r\n  })))\r\n  /**\r\n   * 取消全部的 classItem 勾选\r\n   */\r\n  const selectNone = () => setClassesState(classesState.map(classItem => ({\r\n    ...classItem,\r\n    checked: false\r\n  })))\r\n  /**\r\n   * 勾选某 semester 的全部 classItem\r\n   * @param { number } semesterID \r\n   */\r\n  const selectSemester = (semesterID) => setClassesState(classesState.map(classItem => ({\r\n    ...classItem,\r\n    checked: classItem.semester === semesterID || classItem.checked\r\n  })))\r\n  /**\r\n   * 仅勾选某 semester 的全部 classItem，其他 semester 的取消勾选\r\n   * @param { number } semesterID \r\n   */\r\n  const onlySelectSemester = (semesterID) => setClassesState(classesState.map(classItem => ({\r\n    ...classItem,\r\n    checked: classItem.semester === semesterID\r\n  })))\r\n  /**\r\n   * 勾选某 classItem\r\n   * @param { string } name \r\n   */\r\n  const checkClassItem = name => setClassesState(classesState.map(classItem => classItem.name === name ? {\r\n    ...classItem,\r\n    checked: !classItem.checked\r\n  } : classItem))\r\n  /**\r\n   * 设置某 classItem 的 grades\r\n   * @param { string } name \r\n   * @param { string } newGrades \r\n   */\r\n  const setGrades = (name, newGrades) => setClassesState(classesState.map(classItem => classItem.name === name ? {\r\n    ...classItem,\r\n    grades: newGrades,\r\n    points: getPoints(newGrades)\r\n  } : classItem))\r\n\r\n  if (classesState === defaultClassesState) {\r\n    MyPointsAPI.fetchDB().then(newData => {\r\n      setData(newData)\r\n      setClassesState(\r\n        newData.classes.map(item => ({\r\n          ...item,\r\n          points: getPoints(item.grades),\r\n          checked: true\r\n        })).sort((a, b) => b.points - a.points === 0 ? b.credits - a.credits : b.points - a.points))\r\n    })\r\n  }\r\n\r\n  return (\r\n    <main className='my-points'>\r\n      <Header\r\n        avgPoints={avgPointsState}\r\n        reload={reload}\r\n        selectAll={selectAll}\r\n        selectNone={selectNone} />\r\n      {data.semesters.map(semester =>\r\n        <Semester\r\n          key={semester.ID}\r\n          semesterID={semester.ID}\r\n          semesterName={semester.name}\r\n          classes={getClasses(semester.ID)}\r\n          gradesList={data.grades.map(item => item.name)}\r\n          setGrades={setGrades}\r\n          selectSemester={selectSemester}\r\n          onlySelectSemester={onlySelectSemester}\r\n          checkClassItem={checkClassItem} />\r\n      ).reverse()}\r\n    </main>\r\n  )\r\n}","import React from 'react';\r\nimport './App.css'\r\nimport MyPoints from './MyPoints/MyPoints.jsx'\r\n\r\nexport default function ButtonAppBar() {\r\n\r\n  const appRef = React.createRef()\r\n\r\n  // const toggleFullScreen = () => {\r\n  //   document.fullscreenElement ? document.exitFullscreen() : appRef.current.requestFullscreen()    \r\n  // }\r\n\r\n  return (\r\n    <div ref={appRef} className='app'>\r\n      <MyPoints />\r\n    </div>\r\n  );\r\n}","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App/App.jsx';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}