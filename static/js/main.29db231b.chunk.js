(this["webpackJsonpabby-stitch.github.io"]=this["webpackJsonpabby-stitch.github.io"]||[]).push([[0],[,,,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(5),r=c.n(a),i=(c(10),c(11),c(2)),o=c(3),u=(c(12),c(0));function l(e){var t=e.avgPoints,c=e.reload,n=e.checkNone,s=e.checkAll;return Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("img",{className:"avatar",alt:"avatar",src:"./favicon.ico"}),Object(u.jsx)("h1",{children:"\u5c11\u7237\u7684\u7ee9\u70b9"}),Object(u.jsxs)("p",{className:"avg-points",children:["\u5e73\u5747\u7ee9\u70b9\uff1a",t.toFixed(2)]}),Object(u.jsx)("button",{className:"ms-button",onClick:c,children:"\u5237\u65b0"}),Object(u.jsx)("button",{className:"ms-button",onClick:n,children:"\u5168\u90e8\u6e05\u9664"}),Object(u.jsx)("button",{className:"ms-button primary",onClick:s,children:"\u5168\u90e8\u52fe\u9009"})]})}c(14),c(15);function j(e){var t=e.name,c=e.credits,n=e.grades,a=e.points,r=e.checked,i=e.gradesList,o=e.setGrades,l=e.checkClassItem,j=s.a.createRef();return Object(u.jsxs)("li",{className:"class-list-item",children:[Object(u.jsx)("span",{className:"class-name",children:t}),Object(u.jsx)("span",{className:"class-credits",children:c}),Object(u.jsx)("span",{className:"class-grades",children:Object(u.jsx)("select",{ref:j,onChange:function(){return j.current&&o(t,j.current.value)},value:n,children:i.map((function(e){return Object(u.jsx)("option",{value:e,children:e},e)}))})}),Object(u.jsx)("span",{className:"class-points",children:a}),Object(u.jsx)("span",{className:"class-checked",children:Object(u.jsx)("input",{type:"checkbox",onChange:function(){return l(t)},checked:r})})]})}function d(e){var t=e.semesterID,c=e.semesterName,n=e.classes,s=e.gradesList,a=e.setGrades,r=e.selectSemester,i=e.onlySelectSemester,o=e.checkClassItem;return Object(u.jsxs)("article",{className:"semester",children:[Object(u.jsxs)("header",{className:"title-bar",children:[Object(u.jsx)("h2",{children:c}),Object(u.jsx)("button",{className:"ms-button",onClick:function(){return r(t)},children:"\u52fe\u9009\u5b66\u671f"}),Object(u.jsx)("button",{className:"ms-button primary",onClick:function(){return i(t)},children:"\u4ec5\u672c\u5b66\u671f"})]}),Object(u.jsxs)("div",{className:"class-list-head",children:[Object(u.jsx)("span",{className:"name-field",children:"\u8bfe\u7a0b"}),Object(u.jsx)("span",{className:"credits-field",children:"\u5b66\u5206"}),Object(u.jsx)("span",{className:"grades-field",children:"\u7b49\u7ea7"}),Object(u.jsx)("span",{className:"points-field",children:"\u7ee9\u70b9"}),Object(u.jsx)("span",{className:"checked-field",children:"\u52fe\u9009"})]}),n.map((function(e){return Object(u.jsx)(j,{name:e.name,credits:e.credits,grades:e.grades,points:e.points,checked:e.checked,gradesList:s,setGrades:a,checkClassItem:o},e.name)}))]})}c(16);var b={semesters:[],grades:[],classes:[]},m=[],h=function(e,t){return parseInt(t.filter((function(t){return t.name===e})).map((function(e){return e.points})).join(""))};function f(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(b),r=Object(o.a)(a,2),j=r[0],f=r[1],O=Object(n.useState)(0),p=Object(o.a)(O,2),x=p[0],g=p[1],k=Object(n.useState)(m),N=Object(o.a)(k,2),v=N[0],C=N[1];Object(n.useEffect)((function(){var e=v.reduce((function(e,t){return t.checked?e+t.credits*t.points:e}),0),t=v.reduce((function(e,t){return t.checked?e+t.credits:e}),0);g(0===t?0:e/t)}),[v]);var I=function(e){return C(v.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{checked:t.semester===e||t.checked})})))},S=function(e){return C(v.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{checked:t.semester===e})})))},y=function(e){return C(v.map((function(t){return t.name===e?Object(i.a)(Object(i.a)({},t),{},{checked:!t.checked}):t})))},D=function(e,t){return C(v.map((function(c){return c.name===e?Object(i.a)(Object(i.a)({},c),{},{grades:t,points:h(t,j.grades)}):c})))};return!0===c&&(s(!1),fetch("".concat("https://liangrongjia.github.io/abby-stitch.github.io/db","/my-points.json")).then((function(e){return e.json()})).then((function(e){f(e),C(e.classes.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{points:h(t.grades,e.grades),checked:!0})})).sort((function(e,t){return t.points-e.points===0?t.credits-e.credits:t.points-e.points})))}))),Object(u.jsxs)("main",{className:"my-points",children:[Object(u.jsx)(l,{avgPoints:x,reload:function(){return window.location.reload()},checkAll:function(){return C(v.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{checked:!0})})))},checkNone:function(){return C(v.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{checked:!1})})))}}),j.semesters.map((function(e){return Object(u.jsx)(d,{semesterID:e.ID,semesterName:e.name,classes:(t=e.ID,c=v,c.filter((function(e){return e.semester===t}))||m),gradesList:j.grades.map((function(e){return e.name})),setGrades:D,selectSemester:I,onlySelectSemester:S,checkClassItem:y},e.ID);var t,c})).reverse()]})}function O(){var e=s.a.createRef();return Object(u.jsx)("div",{ref:e,className:"app",children:Object(u.jsx)(f,{})})}var p=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,18)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root")),p()}],[[17,1,2]]]);
//# sourceMappingURL=main.29db231b.chunk.js.map